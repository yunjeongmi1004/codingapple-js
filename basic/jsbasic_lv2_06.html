<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이벤트 버블링과 이벤트관련 함수들</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>

  <button class="btn-modal">모달오픈</button>
  <div class="black-bg">
      <div class="white-bg">
        <h4>로그인하세요</h4>
        <button class="btn btn-danger" id="close">닫기</button>
        <form action="success.html">
          <div class="my-3">
            <input type="text" class="form-control" id="email">
           </div>
           <div class="my-3">
             <input type="password" class="form-control">
           </div>
           <button type="submit" class="btn btn-primary">전송</button>
           <button type="button" class="btn btn-danger" id="close">닫기</button>
        </form> 
      </div>
  </div> 


    <script>
      
      // 이벤트 버블링이 일어나면 이벤트 관련 함수들을 사용해서 처리함
      // black-bg를 클릭시에만 닫히는게 아니라, 뭐든 다 눌러도 닫힘
      // 이것이 바로 이벤트 버블링 : 이벤트가 상위 html로 퍼지는 현상
      // .black-bg 내부에 있는 요소를 클릭하게 되면
      // 그 상위 그 상위의 상위도 다 누른것 이기 때문에 닫히게됨
      document.querySelector('.black-bg').addEventListener('click', function(e){
        e.target;// 유저가 실제로 누른거
        e.currentTarget; // 이벤트리스터 달린 곳 (this)
        e.preventDefault(); // 기본동작 막기(submit)
        e.stopPropagation(); // 내 상위요소로의 이벤트 버블링을 중단

        if(e.target ==  document.querySelector('.black-bg')){
          document.querySelector('.black-bg').classList.remove('active');
        }
      })

      /

      // 4. jquery 모달오픈
        $('.btn-modal, .btn-danger').on('click', function(){
            $('.black-bg').toggleClass('active');
        })

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>